<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>LargeSVM: model_to_from_matlab.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="largeSVM.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">LargeSVM
   </div>
   <div id="projectbrief">Library for Large-Scale Multi-Class Problems</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_c1711ee76361e7ab6ea2b63d5963a3ee.html">Large-scale library</a></li><li class="navelem"><a class="el" href="dir_76f8e86dbb628a83f171cfa1c27acf6f.html">matlab</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">model_to_from_matlab.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Implements functions that save to and load model from Matlab environment.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;vector&gt;</code><br/>
<code>#include &lt;sstream&gt;</code><br/>
<code>#include &lt;time.h&gt;</code><br/>
<code>#include &lt;algorithm&gt;</code><br/>
<code>#include &quot;mex.h&quot;</code><br/>
<code>#include &quot;<a class="el" href="large_s_v_m_8h_source.html">../largeSVM.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="model__to__from__matlab_8h_source.html">model_to_from_matlab.h</a>&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a0bbaff457f87612a93a29c75b2aa28a4"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a0bbaff457f87612a93a29c75b2aa28a4"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="model__to__from__matlab_8cpp.html#a0bbaff457f87612a93a29c75b2aa28a4">NUM_OF_RETURN_FIELD</a>&#160;&#160;&#160;8</td></tr>
<tr class="memdesc:a0bbaff457f87612a93a29c75b2aa28a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Expected number of fields in Matlab structure from which the model is loaded. <br/></td></tr>
<tr class="separator:a0bbaff457f87612a93a29c75b2aa28a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a96d16a46f066ea893171f6915e801bd0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="model__to__from__matlab_8cpp.html#a96d16a46f066ea893171f6915e801bd0">model_to_matlab_structure</a> (mxArray *plhs[], <a class="el" href="classlargesvm_model.html">largesvmModel</a> *model, vector&lt; int &gt; *Y, <a class="el" href="structparameters.html">parameters</a> *param)</td></tr>
<tr class="memdesc:a96d16a46f066ea893171f6915e801bd0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Save the trained model to Matlab, by creating Matlab structure.  <a href="#a96d16a46f066ea893171f6915e801bd0"></a><br/></td></tr>
<tr class="separator:a96d16a46f066ea893171f6915e801bd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab30434c46b344bfd941337c95cbd455f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="model__to__from__matlab_8cpp.html#ab30434c46b344bfd941337c95cbd455f">matlab_matrix_to_model</a> (const mxArray *matlab_struct, <a class="el" href="classlargesvm_model.html">largesvmModel</a> *model, vector&lt; int &gt; *Y, <a class="el" href="structparameters.html">parameters</a> *param, const char **msg)</td></tr>
<tr class="memdesc:ab30434c46b344bfd941337c95cbd455f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads the trained model from Matlab structure.  <a href="#ab30434c46b344bfd941337c95cbd455f"></a><br/></td></tr>
<tr class="separator:ab30434c46b344bfd941337c95cbd455f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Implements functions that save to and load model from Matlab environment. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ab30434c46b344bfd941337c95cbd455f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool matlab_matrix_to_model </td>
          <td>(</td>
          <td class="paramtype">const mxArray *&#160;</td>
          <td class="paramname"><em>matlab_struct</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlargesvm_model.html">largesvmModel</a> *&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; int &gt; *&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structparameters.html">parameters</a> *&#160;</td>
          <td class="paramname"><em>param</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char **&#160;</td>
          <td class="paramname"><em>msg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads the trained model from Matlab structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">matlab_struct</td><td>Pointer to Matlab structure. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">model</td><td>Model object that is to be populated. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Y</td><td>Vector of possible labels. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">param</td><td>The parameters of the algorithm. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">msg</td><td>Error message, if error encountered. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>False if error encountered, otherwise true.</dd></dl>
<p>The Matlab structure is organized as ["algorithm", "dimension", "num_classes", "labels", "num_weights", "param_bias", "kernel_width", "model"]. In order to compress memory and to use the memory efficiently, we coded the model in the following way:</p>
<p>For AMM batch, AMM online, PEGASOS: The model is stored as (("dimension" + 1) by "num_weights") matrix. The first element of each weight is the degradation of the weight, followed by values of the weight for each feature of the data set. If bias term is non-zero, then the final element of each weight corresponds to bias term, and the matrix is of size (("dimension" + 2) by "num_weights"). By looking at "labels" and "num_weights" members of Matlab structure we can find out which weights belong to which class. For example, first num_weights[0] weights belong to labels[0] class, next num_weights[1] weights belong to labels[1] class, and so on.</p>
<p>For BSGD: The model is stored as (("num_classes" + "dimension") by "num_weights") matrix. The first "num_classes" elements of each weight correspond to alpha parameters for each class, given in order of "labels" member of the Matlab structure. This is followed by elements of the weights (or support vectors) for each feature of the data set.</p>
<p>For LLSVM: TBD. </p>

</div>
</div>
<a class="anchor" id="a96d16a46f066ea893171f6915e801bd0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void model_to_matlab_structure </td>
          <td>(</td>
          <td class="paramtype">mxArray *&#160;</td>
          <td class="paramname"><em>plhs</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classlargesvm_model.html">largesvmModel</a> *&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">vector&lt; int &gt; *&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structparameters.html">parameters</a> *&#160;</td>
          <td class="paramname"><em>param</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Save the trained model to Matlab, by creating Matlab structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">plhs</td><td>Pointer to Matlab output. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">model</td><td>Trained model. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">Y</td><td>Vector of possible labels. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">param</td><td>The parameters of the algorithm.</td></tr>
  </table>
  </dd>
</dl>
<p>The Matlab structure is organized as ["algorithm", "dimension", "num_classes", "labels", "num_weights", "param_bias", "kernel_width", "model"]. In order to compress memory and to use the memory efficiently, we coded the model in the following way:</p>
<p>For AMM batch, AMM online, PEGASOS: The model is stored as (("dimension" + 1) by "num_weights") matrix. The first element of each weight is the degradation of the weight, followed by values of the weight for each feature of the data set. If bias term is non-zero, then the final element of each weight corresponds to bias term, and the matrix is of size (("dimension" + 2) by "num_weights"). By looking at "labels" and "num_weights" members of Matlab structure we can find out which weights belong to which class. For example, first num_weights[0] weights belong to labels[0] class, next num_weights[1] weights belong to labels[1] class, and so on.</p>
<p>For BSGD: The model is stored as (("num_classes" + "dimension") by "num_weights") matrix. The first "num_classes" elements of each weight correspond to alpha parameters for each class, given in order of "labels" member of the Matlab structure. This is followed by elements of the weights (or support vectors) for each feature of the data set.</p>
<p>For LLSVM: TBD. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 3 2012 21:11:28 for LargeSVM by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
